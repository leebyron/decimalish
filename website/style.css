@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Roboto+Mono");

:root {
  --nav-size: 50px;
  --small-col-width: 285px;
  --medium-col-width: 350px;
  --gutter-size: 2.5rem;
  --column-gap: 2.5rem;
  --font-size: 15px;
  --letter-spacing: -0.009em;
  --max-width: calc(3 * var(--small-col-width) + 2 * var(--column-gap));

  /* colors */
  --header-color-lite: #56585b;
  --header-color-dark: #56585b;
  --header-text-color-lite: #fff;
  --header-text-color-dark: #fff;
  --text-color-lite: #000000e0;
  --text-color-dark: #ffffffe0;
  --code-color-lite: #00000090;
  --code-color-dark: #ffffff90;
  --pre-bg-color-lite: #00000010;
  --pre-bg-color-dark: #ffffff10;
  --section-bg-color-lite: #ffffff;
  --section-bg-color-dark: #23252c;
  --section-odd-bg-color-lite: #fafafa;
  --section-odd-bg-color-dark: #2a2b33;
  --api-bg-color-lite: #c2ffdb;
  --api-bg-color-dark: #2b4e3d;
  --error-bg-color-lite: #cd3b00;
  --error-bg-color-dark: #cd3b00;
  --link-highlight-color-lite: #ffca00;
  --link-highlight-color-dark: #ffca00;
  --keyword-color-lite: #1556be;
  --keyword-color-dark: #6796e6;
  --function-color-lite: #679c00;
  --function-color-dark: #a6e22e;
  --param-color-lite: #cf7000;
  --param-color-dark: #fd971f;
  --label-color-lite: #cf7000;
  --label-color-dark: #fd971f;
  --type-color-lite: #0089b3;
  --type-color-dark: #66d9ef;
  --operator-color-lite: #dd0856;
  --operator-color-dark: #f92672;
  --string-color-lite: #b3a20b;
  --string-color-dark: #e6db74;
  --number-color-lite: #684d99;
  --number-color-dark: #ae81ff;
  --comment-color-lite: #001f6870;
  --comment-color-dark: #fffda370;
}

:root,
.light {
  --header-color: var(--header-color-lite);
  --header-text-color: var(--header-text-color-lite);
  --text-color: var(--text-color-lite);
  --code-color: var(--code-color-lite);
  --pre-bg-color: var(--pre-bg-color-lite);
  --section-bg-color: var(--section-bg-color-lite);
  --section-odd-bg-color: var(--section-odd-bg-color-lite);
  --api-bg-color: var(--api-bg-color-lite);
  --error-bg-color: var(--error-bg-color-lite);
  --link-highlight-color: var(--link-highlight-color-lite);
  --keyword-color: var(--keyword-color-lite);
  --function-color: var(--function-color-lite);
  --param-color: var(--param-color-lite);
  --type-color: var(--type-color-lite);
  --label-color: var(--label-color-lite);
  --operator-color: var(--operator-color-lite);
  --string-color: var(--string-color-lite);
  --number-color: var(--number-color-lite);
  --comment-color: var(--comment-color-lite);
}

.dark {
  --header-color: var(--header-color-dark);
  --header-text-color: var(--header-text-color-dark);
  --text-color: var(--text-color-dark);
  --code-color: var(--code-color-dark);
  --pre-bg-color: var(--pre-bg-color-dark);
  --section-bg-color: var(--section-bg-color-dark);
  --section-odd-bg-color: var(--section-odd-bg-color-dark);
  --api-bg-color: var(--api-bg-color-dark);
  --error-bg-color: var(--error-bg-color-dark);
  --link-highlight-color: var(--link-highlight-color-dark);
  --keyword-color: var(--keyword-color-dark);
  --function-color: var(--function-color-dark);
  --param-color: var(--param-color-dark);
  --type-color: var(--type-color-dark);
  --label-color: var(--label-color-dark);
  --operator-color: var(--operator-color-dark);
  --string-color: var(--string-color-dark);
  --number-color: var(--number-color-dark);
  --comment-color: var(--comment-color-dark);
}

@media (prefers-color-scheme: dark) {
  :root {
    --header-color: var(--header-color-dark);
    --header-text-color: var(--header-text-color-dark);
    --text-color: var(--text-color-dark);
    --code-color: var(--code-color-dark);
    --pre-bg-color: var(--pre-bg-color-dark);
    --section-bg-color: var(--section-bg-color-dark);
    --section-odd-bg-color: var(--section-odd-bg-color-dark);
    --api-bg-color: var(--api-bg-color-dark);
    --error-bg-color: var(--error-bg-color-dark);
    --link-highlight-color: var(--link-highlight-color-dark);
    --keyword-color: var(--keyword-color-dark);
    --function-color: var(--function-color-dark);
    --param-color: var(--param-color-dark);
    --type-color: var(--type-color-dark);
    --label-color: var(--label-color-dark);
    --operator-color: var(--operator-color-dark);
    --string-color: var(--string-color-dark);
    --number-color: var(--number-color-dark);
    --comment-color: var(--comment-color-dark);
  }
}

@media not all and (min-width: 700px) {
  :root {
    --gutter-size: 1.5rem;
  }
}

html,
body {
  font-family:
    "Inter",
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    "Roboto",
    "Oxygen",
    "Ubuntu",
    "Cantarell",
    "Fira Sans",
    "Droid Sans",
    "Helvetica Neue",
    sans-serif;
  font-kerning: normal;
  font-variant-ligatures: contextual common-ligatures;
  font-feature-settings:
    "kern" 1,
    "liga" 1,
    "ccmp" 1,
    "case" 1,
    "calt" 1,
    "ss01" 1;

  --bg-color: var(--header-color);
  background-color: var(--bg-color);
  font-size: var(--font-size);
  letter-spacing: var(--letter-spacing);
  line-height: 1.6;
  scroll-behavior: smooth;
}

* {
  margin: 0;
  padding: 0;
}

header,
footer {
  --text-color: var(--header-text-color);
  --bg-color: var(--header-color);
}

header,
footer,
section {
  background-color: var(--bg-color);
  color: var(--text-color);
}

h1 {
  font-size: 2rem;
  margin-bottom: 1em;
}

h2 {
  font-size: 1.414rem;
  margin-bottom: 1em;
}

h3 {
  font-size: 1rem;
  margin-bottom: 1em;
}

h4 {
  font-size: 1rem;
  margin-bottom: 1em;
  font-weight: 500;
}

header {
  position: relative;
  height: max(
    33vh,
    calc(0.52 * min(100vw - 20px, 800px) - 2 * var(--nav-size))
  );
  padding: 0 var(--gutter-size) var(--nav-size);
  display: flex;
  flex-direction: column;
  align-items: center;
}

section {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--bg-color);
}

body > section {
  --bg-color: var(--section-bg-color);
}

section > * {
  width: 100%;
}

section > :not(section) {
  margin: var(--gutter-size);
  max-width: calc(min(var(--max-width), 100vw - 2 * var(--gutter-size)));
}

footer {
  padding: 20px;
  display: flex;
  justify-content: center;
}

p {
  max-width: 40em;
}

p:not(:last-child),
ol:not(:last-child),
ul:not(:last-child) {
  margin-bottom: 1rem;
}

ol,
ul {
  padding-left: var(--gutter-size);
}

details {
  padding-left: var(--gutter-size);
}

summary {
  cursor: pointer;
  list-style: none;
  position: relative;
}

summary::marker,
summary::-webkit-details-marker {
  display: none;
}

summary::before {
  content: "â–¶";
  opacity: 40%;
  padding: 0 1ch;
  position: absolute;
  right: 100%;
  transform: rotate(0);
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

li {
  max-width: calc(40em - var(--gutter-size));
}

li:not(:last-child) {
  margin-bottom: 0.5rem;
}

pre {
  overflow: scroll;
  padding: 0.5em 1em;
  margin: 1em 0;
  border-radius: 2px;
  background-color: var(--pre-bg-color);
  width: fit-content;
  min-width: min(100% - 2em, 60ch);
}

pre,
code {
  font-family: "Roboto Mono", monospace;
  white-space: pre-wrap;
  --text-color: var(--code-color);
  color: var(--text-color);
}

code span {
  color: var(--text-color);
}

a {
  white-space: nowrap;
  --underline-color: var(--text-color);
}

a,
a > span {
  color: var(--text-color);
  /* this helps link underlines not clash with text, but causes other issues */
  /* text-shadow: 2px 0 var(--bg-color), -2px 0 var(--bg-color); */
  position: relative;
  z-index: 0;
  text-decoration: none;
}

a:before,
a > span:before {
  content: "";
  position: absolute;
  background-color: var(--underline-color);
  height: 0.06em;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: -1;
  opacity: 0.3;
  transform: scaleX(0.97) translateY(-0.08em);
  transition: all 0.18s cubic-bezier(0.5, 0, 0.25, 1);
}

a:hover:before,
a:hover > span:before {
  transform: translateY(0.08em) scaleY(2);
  opacity: 1;
  background-color: var(--link-highlight-color);
}

section:not(:target) > h2 > a:not(:hover),
section:not(:target) > div > h2 > a:not(:hover),
section:not(:target) > div > * > h2 > a:not(:hover),
section:not(:target) > h3 > a:not(:hover),
section:not(:target) > div > h3 > a:not(:hover),
section:not(:target) > div > * > h3 > a:not(:hover),
section:not(:target) > h4 > a:not(:hover),
section:not(:target) > div > h4 > a:not(:hover),
section:not(:target) > div > * > h4 > a:not(:hover) {
  --underline-color: transparent;
}

section:target > h2 > a:before,
section:target > div > h2 > a:before,
section:target > div > * > h2 > a:before,
section:target > h3 > a:before,
section:target > div > h3 > a:before,
section:target > div > * > h3 > a:before,
section:target > h4 > a:before,
section:target > div > h4 > a:before,
section:target > div > * > h4 > a:before,
a:hover:before {
  transform: translateY(0.08em) scaleY(2);
}

a:hover:before {
  background-color: var(--link-highlight-color);
  opacity: 1;
}

@media (min-width: 700px) {
  .two-col {
    column-fill: balance;
    column-gap: var(--column-gap);
    column-count: 2;
  }
}

/* Theme toggler */

.theme-toggle {
  position: fixed;
  top: 0;
  right: 0;
  cursor: pointer;
  opacity: 0.3;
  transition: all 0.15s ease-out;
}

@media (min-width: 1050px) {
  .theme-toggle {
    z-index: 1;
  }
}

.theme-toggle:hover {
  opacity: 0.5;
}

.theme-toggle svg {
  position: absolute;
  top: 0;
  right: 0;
  transform-origin: center;
  padding: 0.85em 1em;
  width: 23px;
  height: 23px;
  -webkit-tap-highlight-color: transparent;
}

.theme-toggle svg path {
  fill: var(--text-color);
}

.dark-toggle,
.light .dark-toggle,
.dark .light-toggle {
  opacity: 0;
  pointer-events: none;
  transform: translateY(0.5em);
  transition: all 0.35s ease-in;
}

.light-toggle,
.light .light-toggle,
.dark .dark-toggle {
  opacity: 1;
  pointer-events: all;
  transform: none;
  transition: all 0.35s ease-out 0.25s;
}

@media (prefers-color-scheme: dark) {
  .light-toggle {
    opacity: 0;
    pointer-events: none;
    transform: translateY(0.5em);
    transition: all 0.35s ease-in;
  }

  .dark-toggle {
    opacity: 1;
    pointer-events: all;
    transform: none;
    transition: all 0.35s ease-out 0.25s;
  }
}

/* Section specific */

header {
  box-shadow: 0 0.33em 1em #00000030;
}

header nav {
  width: 100%;
  max-width: var(--max-width);
  list-style: none;
  padding: 0 20px;
  display: flex;
  flex-wrap: wrap;
  white-space: nowrap;
  height: var(--nav-size);
  align-items: center;
}

header nav a {
  padding: 0.5em 1em;
  --underline-color: transparent;
}

header nav a:before {
  margin: 0.5em 1em;
}

header nav a:first-child {
  margin-left: -1em;
}

header nav a:last-child {
  margin-left: auto;
  margin-right: -1em;
}

.skip-nav {
  overflow: hidden;
  width: fit-content;
  transition: all 0.2s ease-in-out;
}

.skip-nav:not(:focus) {
  width: 0;
  padding-left: 0;
  padding-right: 0;
}

#intro h3 {
  position: absolute;
}

#intro p:first-child:before {
  content: "Decimalish ";
  visibility: hidden;
  font-weight: bold;
}

.two-grid {
  display: grid;
  grid-template-columns: repeat(
    auto-fill,
    minmax(var(--medium-col-width), 1fr)
  );
  gap: 0 var(--column-gap);
  margin-top: 0;
}

.two-grid h3 {
  margin-top: var(--gutter-size);
}

.api-toc-sec {
  --bg-color: var(--api-bg-color);
}

.api-toc-sec > div {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(var(--small-col-width), 1fr));
  gap: var(--column-gap);
}

.api-toc-sec ul {
  list-style: none;
  padding: 0;
}

.api-toc-sec li {
  margin: 0;
}

.api-toc-sec li a {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  --underline-color: transparent;
}
/* Fix links */
.api-toc-sec li a:before {
  display: none;
}
.api-toc-sec a span:before {
  bottom: 0.1em;
}

.api-toc-sec pre {
  margin-left: 1.5em;
}

.api.error {
  --bg-color: var(--error-bg-color);
  --text-color: #ffffff;
  --code-color: #ffffff90;
  --code-bg-color: #ffffff08;
  --underline-color: #ffffff4d;
  --highlight-color: #ffe014;

  --keyword-color: var(--code-color);
  --function-color: var(--highlight-color);
  --param-color: var(--highlight-color);
  --type-color: var(--highlight-color);
  --label-color: var(--highlight-color);
  --operator-color: var(--code-color);
  --string-color: var(--highlight-color);
  --number-color: var(--code-color);
  --comment-color: var(--comment-color-dark);
}

section.odd {
  --bg-color: var(--section-odd-bg-color);
}

@media (min-width: 700px) {
  .api > div {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--column-gap);
  }

  .api > div > :last-child {
    grid-column: span 3;
  }

  .api.member > div > :first-child {
    text-align: right;
  }
}

:not(.api.member) + .api.member {
  margin-top: calc(-1 * var(--gutter-size));
}

.api.member:not(:last-child) > * {
  margin-bottom: 0;
}

.api.member:not(:last-child) details[open] {
  margin-bottom: calc(0.5 * var(--gutter-size));
}

.api.member details:not([open]) .decl {
  margin-bottom: 0;
}

.decl {
  display: block;
  text-indent: -4ch;
  padding-left: 4ch;
  margin-bottom: 1em;
}

.keyword {
  --text-color: var(--keyword-color);
}

.function {
  --text-color: var(--function-color);
}

.param {
  --text-color: var(--param-color);
}

.type {
  --text-color: var(--type-color);
}

.label {
  --text-color: var(--label-color);
}

.operator {
  --text-color: var(--operator-color);
}

.string {
  --text-color: var(--string-color);
}

a.string:before {
  left: 1ch;
  right: 1ch;
}

.number {
  --text-color: var(--number-color);
}

.comment {
  --text-color: var(--comment-color);
}
