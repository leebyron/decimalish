import { Numeric, sqrt } from '../decimalish'

describe('sqrt', () => {

  it('Does not allow negative numbers', () => {
    expect(() => sqrt(-1)).toThrow('[decimalish] Square root of negative')
  })

  it('Supports sqrt of 0', () => {
    expect(sqrt(0)).toBe('0')
  })

  it('Performs accurate sqrt', () => {
    expect(sqrt('1524157875019052100')).toBe('1234567890')
    expect(sqrt(7)).toBe('2.6457513110645905905')
    expect(sqrt(9876543210)).toBe('99380.79900061178316748905')
  })

  it('Generate arbitrarily precise sqrt', () => {
    expect(sqrt(2, { places: 300 })).toBe('1.41421356237309504880168872420969807856967187537694807317667973799073247846210703885038753432764157273501384623091229702492483605585073721264412149709993583141322266592750559275579995050115278206057147010955997160597027453459686201472851741864088919860955232923048430871432145083976260362799525140799')
  })

  it('Accepts very large and precise input', () => {
    const bigNum = '1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890'
    expect(sqrt(bigNum as Numeric)).toBe('35136418288201442531112223816998829391748408772394003368165480068665646116465388194949300644461930324595395982930269502735974683340402495738034308205577671.85494882476056536147')
  })

})
